===========================================
CARA TEST FITUR SECURITY CONTACT FORM
===========================================

✅ DEPLOYMENT STATUS:
- Backend: UPDATED & RUNNING
- Frontend: AUTO-DEPLOYING via Netlify
- Security Features: ACTIVE

===========================================
TEST 1: RATE LIMITING
===========================================

Buka website: https://4leafclover.id
Scroll ke bagian Contact

1. Isi form dan kirim message (berhasil)
2. Isi form dan kirim message lagi (berhasil)
3. Isi form dan kirim message lagi (berhasil)
4. Isi form dan kirim message ke-4 (DITOLAK)

EXPECTED RESULT:
- Message ke-4 akan muncul error:
  "Too many messages sent. Please try again after 15 minutes."

===========================================
TEST 2: INPUT VALIDATION - NAME
===========================================

Test Case 1: Name terlalu pendek
- Name: "A"
- Email: "test@test.com"
- Message: "This is a test message"
- Click Send

EXPECTED: Error "Name must be at least 2 characters"

Test Case 2: Name dengan karakter tidak valid
- Name: "John123"
- Email: "test@test.com"
- Message: "This is a test message"
- Click Send

EXPECTED: Error "Name can only contain letters, spaces, hyphens, and apostrophes"

===========================================
TEST 3: INPUT VALIDATION - EMAIL
===========================================

Test Case 1: Email tidak valid
- Name: "John Doe"
- Email: "invalid-email"
- Message: "This is a test message"
- Click Send

EXPECTED: Error "Please enter a valid email address"

Test Case 2: Email kosong
- Name: "John Doe"
- Email: ""
- Message: "This is a test message"
- Click Send

EXPECTED: Error "Email is required"

===========================================
TEST 4: INPUT VALIDATION - MESSAGE
===========================================

Test Case 1: Message terlalu pendek
- Name: "John Doe"
- Email: "test@test.com"
- Message: "Hi"
- Click Send

EXPECTED: Error "Message must be at least 10 characters"

Test Case 2: Message terlalu panjang
- Name: "John Doe"
- Email: "test@test.com"
- Message: [Paste text lebih dari 5000 karakter]
- Click Send

EXPECTED: Error "Message must not exceed 5000 characters"

===========================================
TEST 5: XSS PROTECTION
===========================================

Test Case 1: Script tag dalam message
- Name: "John Doe"
- Email: "test@test.com"
- Message: "<script>alert('XSS')</script>"
- Click Send

EXPECTED: Error "Invalid content detected. Please remove any HTML or script tags."

Test Case 2: HTML tag dalam message
- Name: "John Doe"
- Email: "test@test.com"
- Message: "<iframe src='evil.com'></iframe>"
- Click Send

EXPECTED: Error "Invalid content detected. Please remove any HTML or script tags."

Test Case 3: JavaScript dalam message
- Name: "John Doe"
- Email: "test@test.com"
- Message: "Click here: javascript:alert('XSS')"
- Click Send

EXPECTED: Error "Invalid content detected. Please remove any HTML or script tags."

===========================================
TEST 6: VALID MESSAGE
===========================================

Test Case: Message yang valid
- Name: "John Doe"
- Email: "john@example.com"
- Message: "Hello, I would like to discuss a project with you. Please contact me at your earliest convenience."
- Click Send

EXPECTED: 
- Success message: "Message sent successfully! I'll get back to you soon."
- Form di-reset (semua field kosong)
- Message tersimpan di database

===========================================
VERIFY DI ADMIN PANEL
===========================================

1. Login ke admin: https://4leafclover.id/admin
   - Email: admin@4leafclover.id
   - Password: YourAdminPassword123!

2. Klik menu "Messages" di sidebar

3. Lihat semua message yang masuk

4. Pastikan:
   - Message yang valid tersimpan dengan benar
   - Tidak ada HTML/script tags dalam message
   - Semua data ter-sanitize dengan baik

===========================================
CHECK BACKEND LOGS
===========================================

SSH ke VPS dan check logs:

ssh root@43.228.213.128
Password: Y2BNxabkpqXTR58y

docker logs portfolio-backend --tail 50 -f

EXPECTED LOG:
- "Message received: { id: X, from: 'email@test.com', ip: '...', timestamp: '...' }"
- Jika ada suspicious content: "Suspicious content detected: { ip: '...', name: '...', email: '...' }"

===========================================
SECURITY FEATURES SUMMARY
===========================================

✅ Rate Limiting: 3 messages per 15 minutes per IP
✅ Input Validation: Name, email, message
✅ XSS Protection: HTML/Script tags removed
✅ SQL Injection Protection: Parameterized queries
✅ Client-side Validation: Real-time error messages
✅ Character Counter: Max 5000 characters
✅ Logging: All messages logged with IP and timestamp

===========================================
TROUBLESHOOTING
===========================================

Jika ada masalah:

1. Check backend logs:
   docker logs portfolio-backend --tail 100

2. Check Netlify deploy status:
   https://app.netlify.com/sites/[your-site]/deploys

3. Test API directly:
   curl -X POST https://api.4leafclover.id/api/messages \
     -H "Content-Type: application/json" \
     -d '{"name":"Test","email":"test@test.com","message":"Test message 1234567890"}'

4. Restart backend jika perlu:
   ssh root@43.228.213.128
   cd /root/n8n-production/portfolio
   docker compose restart backend

===========================================
NEXT STEPS (OPTIONAL)
===========================================

Untuk keamanan tambahan, bisa implement:

1. Google reCAPTCHA v3
   - Proteksi dari bot otomatis
   - Invisible untuk user

2. Email Notification
   - Admin dapat notifikasi saat ada message baru
   - Setup dengan Nodemailer

3. IP Blacklist
   - Block IP yang melakukan abuse
   - Manual atau otomatis

4. Honeypot Field
   - Hidden field untuk catch bot
   - Bot akan mengisi, human tidak

Dokumentasi lengkap ada di:
CONTACT_SECURITY_IMPLEMENTATION.md

===========================================
STATUS: READY FOR TESTING ✅
===========================================
